/*!
 spSlider Build version 0.0.1, 11-15-2013, 3:03:46 PM
*/
!function(a){a.fn.spSlider=function(d){var e=this,f=a.extend({width:400,height:300,listURL:"",listName:"",limit:0,categories:[]},d),g=f.height;f.caption===!0&&(g+=36),f.newHeight=g,e.height(f.newHeight),e.width(f.width);var h=c(f);a.when(h).done(function(a){e.html(a);var c=b(e,f);return c})};var b=function(b,c){b.children(".swiper-slide").height(c.newHeight).width(c.width),b.children(".swiper-container").height(c.newHeight).width(c.width);var d={keyboardControl:!0,loop:!0,watchActiveIndex:!0};a.extend(c,d);var e=b.swiper(c);b.children(".swipe-nav.left").click(function(){e.swipePrev()}),b.children(".swipe-nav.right").click(function(){e.swipeNext()})},c=function(b){var c=a.Deferred(),f=e(b);return a.when(f).done(function(a){var e=d(a,b);c.resolve(e)}),c.promise()},d=function(a,b){var c,d,e,f,g=a,h=g.length,i="<a class='swipe-nav left'>left</a><a class='swipe-nav right'>right</a>",j="<div class='swiper-wrapper'>";for(c=0;h>c;c++)d=g[c][b.linkColumn]||"",e=g[c][b.imageColumn]||"",f=g[c][b.captionColumn]||"",j+="<div class='swiper-slide'>",j+=""===d?"<img src='"+e+"' />":"<a href='"+d+"'><img style='border:none' src='"+e+"' /></a>",b.caption===!0&&(j+="<div class='caption' style='top:"+b.height+"px'>"+f+"</div>"),j+="</div>";j+="</ul>";var k=i+j;return k},e=function(b){var c=a.Deferred();return a().SPServices({operation:"GetListItems",async:!0,webURL:b.listURL,listName:b.listName,CAMLViewFields:"<ViewFields Properties='True' />",CAMLQuery:"<Query><Where><Eq><FieldRef Name='ContentType' /><Value Type='Text'>Picture</Value></Eq></Where><OrderBy><FieldRef Name='ID' Ascending='False' /></OrderBy></Query>",CAMLRowLimit:b.limit,completefunc:function(b){var d=a(b.responseXML).SPFilterNode("z:row").SPXmlToJson({includeAllAttrs:!0,removeOws:!0});c.resolve(d)}}),c.promise()}}(jQuery);